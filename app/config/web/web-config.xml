<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE aspectran PUBLIC "-//ASPECTRAN//DTD Aspectran Configuration 6.0//EN"
        "http://aspectran.github.io/dtd/aspectran-6.dtd">
<aspectran>

    <description>
        An Aspectran configuration for the Web Environment.
        Note that names of translets that match the request URI always start with a forward slash (/).
    </description>

    <bean id="jspViewDispatcher" class="com.aspectran.web.support.view.JspViewDispatcher" important="true">
        <description>
            Register a JSP View Dispatcher.
        </description>
        <properties>
            <item name="prefix">/WEB-INF/jsp/</item>
            <item name="suffix">.jsp</item>
        </properties>
    </bean>

    <aspect id="webTransletSettings">
        <description>
            This aspect is for injecting default settings into translets running in the web environment.
        </description>
        <joinpoint>
            pointcut: {
                +: /**
            }
        </joinpoint>
        <settings>
            <setting name="characterEncoding" value="utf-8"/>
            <setting name="viewDispatcher" value="jspViewDispatcher"/>
            <setting name="format.indentSize" value="2"/>
            <setting name="format.dateFormat" value="yyyy-MM-dd"/>
            <setting name="format.dateTimeFormat" value="yyyy-MM-dd HH:mm:ss"/>
            <setting name="format.nullWritable" value="true"/>
        </settings>
    </aspect>

<!--    <aspect id="signedInCheckAspect" order="1">-->
<!--        <joinpoint>-->
<!--            pointcut: {-->
<!--                +: /**-->
<!--                -: /-->
<!--                -: /*/signin-->
<!--                -: /modal/**-->
<!--            }-->
<!--        </joinpoint>-->
<!--        <advice bean="userManager">-->
<!--            <before>-->
<!--                <invoke method="checkSignedIn"/>-->
<!--            </before>-->
<!--        </advice>-->
<!--    </aspect>-->

    <append file="/config/web/common/locale.xml"/>
    <append file="/config/web/common/xss-prevent.xml"/>
    <append file="/config/web/pages/pages.xml"/>
    <append file="/config/web/pages/modal.xml" profile="!prod"/>

</aspectran>