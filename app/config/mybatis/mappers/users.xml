<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="users">

    <insert id="insertUser" parameterType="club.textchat.user.UserInfo" useGeneratedKeys="true" keyProperty="userNo">
        insert into users (user_nm, description, country_cd, lang_cd, ip_addr)
        values (#{username}, #{description}, #{country}, #{language}, #{ipAddr})
    </insert>

    <update id="discardUsername" parameterType="int">
        update users set
            discarded_dt = now()
        where user_no = #{userNo}
            and discarded_dt is null
    </update>

</mapper>