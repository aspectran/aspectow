<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE aspectran PUBLIC "-//ASPECTRAN//DTD Aspectran Configuration 6.0//EN"
        "http://aspectran.github.io/dtd/aspectran-6.dtd">
<aspectran>

    <!-- Development -->
    <environment profile="dev">
        <properties>
            <item name="redis.uri.session_db" value="%{classpath:redis-dev.properties^uri.session_db}"/>
            <item name="redis.uri.chat_db" value="%{classpath:redis-dev.properties^uri.chat_db}"/>
            <item name="redis.channel.public_chat" value="%{classpath:redis-dev.properties^channel.public_chat}"/>
            <item name="redis.channel.private_chat" value="%{classpath:redis-dev.properties^channel.private_chat}"/>
            <item name="redis.channel.random_chat" value="%{classpath:redis-dev.properties^channel.random_chat}"/>
            <item name="redis.channel.stranger_chat" value="%{classpath:redis-dev.properties^channel.stranger_chat}"/>
            <item name="redis.channel.exchange_chat" value="%{classpath:redis-dev.properties^channel.exchange_chat}"/>
            <item name="redis.channel.lobby_chat" value="%{classpath:redis-dev.properties^channel.lobby_chat}"/>
        </properties>
    </environment>

    <!-- Production - Oracle Cloud -->
    <environment profile="prod">
        <properties>
            <item name="redis.uri.session_db" value="%{classpath:redis-prod.properties^uri.session_db}"/>
            <item name="redis.uri.chat_db" value="%{classpath:redis-prod.properties^uri.chat_db}"/>
            <item name="redis.channel.public_chat" value="%{classpath:redis-prod.properties^channel.public_chat}"/>
            <item name="redis.channel.private_chat" value="%{classpath:redis-prod.properties^channel.private_chat}"/>
            <item name="redis.channel.random_chat" value="%{classpath:redis-prod.properties^channel.random_chat}"/>
            <item name="redis.channel.stranger_chat" value="%{classpath:redis-prod.properties^channel.stranger_chat}"/>
            <item name="redis.channel.exchange_chat" value="%{classpath:redis-prod.properties^channel.exchange_chat}"/>
            <item name="redis.channel.lobby_chat" value="%{classpath:redis-prod.properties^channel.lobby_chat}"/>
        </properties>
    </environment>

    <!-- Production - GCP -->
    <environment profile="prod-gcp">
        <properties>
            <item name="redis.uri.session_db" value="%{classpath:redis-prod-gp.properties^uri.session_db}"/>
            <item name="redis.uri.chat_db" value="%{classpath:redis-prod-gcp.properties^uri.chat_db}"/>
            <item name="redis.channel.public_chat" value="%{classpath:redis-prod-gcp.properties^channel.public_chat}"/>
            <item name="redis.channel.private_chat" value="%{classpath:redis-prod-gcp.properties^channel.private_chat}"/>
            <item name="redis.channel.random_chat" value="%{classpath:redis-prod-gcp.properties^channel.random_chat}"/>
            <item name="redis.channel.stranger_chat" value="%{classpath:redis-prod-gcp.properties^channel.stranger_chat}"/>
            <item name="redis.channel.exchange_chat" value="%{classpath:redis-prod-gcp.properties^channel.exchange_chat}"/>
            <item name="redis.channel.lobby_chat" value="%{classpath:redis-prod-gcp.properties^channel.lobby_chat}"/>
        </properties>
    </environment>

    <bean class="club.textchat.redis.RedisConnectionPool" lazyDestroy="true">
        <arguments>
            <item>
                <bean class="club.textchat.redis.RedisConnectionPoolConfig">
                    <properties>
                        <item name="uri">%{redis.uri.chat_db}</item>
                    </properties>
                </bean>
            </item>
        </arguments>
    </bean>

</aspectran>